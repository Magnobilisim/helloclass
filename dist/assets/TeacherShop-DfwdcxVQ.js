import{c as S,u as F,r as h,j as e,F as A}from"./index-BaVKQqDK.js";import{Z as R}from"./zap-C4VB4A9_.js";import{C as $}from"./credit-card-CI7QNFMN.js";import{T as D}from"./trending-up-CnJvnI7k.js";import{C as I}from"./clock-DNp63JWT.js";import{X as q}from"./x-yt4G6MFv.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],M=S("wallet",z),E=a=>a==="approved"?"bg-emerald-50 text-emerald-600 border-emerald-100":a==="rejected"?"bg-red-50 text-red-500 border-red-100":"bg-amber-50 text-amber-600 border-amber-100",J=()=>{const{user:a,systemSettings:l,t,transactions:f,purchaseAiCredits:N,aiUsageLogs:v,showAlert:u,payouts:_,requestPayout:w,payoutRequests:k}=F(),[C,i]=h.useState(!1),[g,o]=h.useState(""),[n,c]=h.useState("");if(!a)return null;const x=f.filter(s=>s.teacherId===a.id),b=x.reduce((s,r)=>s+r.amount,0)*(l.pointConversionRate||0)*((100-l.commissionRate)/100),T=_.filter(s=>s.teacherId===a.id).reduce((s,r)=>s+r.amountTL,0),m=k.filter(s=>s.teacherId===a.id),p=m.filter(s=>s.status==="pending").reduce((s,r)=>s+r.amountTL,0),d=Math.max(0,b-T-p),y=l.teacherCreditPackages||[],j=v.filter(s=>s.userId===a.id).slice(0,8),L=()=>{if(d<=0){u(t("payout_amount_invalid"),"error");return}o(d.toFixed(2)),c(""),i(!0)},P=()=>{const s=Number(g);if(!s||s<=0){u(t("payout_amount_invalid"),"error");return}w(s,n.trim()?n.trim():void 0)&&(i(!1),o(""),c(""))};return e.jsxs("div",{className:"space-y-8 pb-16 animate-fade-in",children:[e.jsxs("header",{className:"bg-white rounded-3xl border border-gray-100 shadow-sm p-8 flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(R,{className:"text-brand-500",size:28}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase font-bold text-gray-400",children:t("teacher_wallet_title")}),e.jsx("h1",{className:"text-2xl font-black text-gray-900",children:t("teacher_shop_headline")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-5 rounded-2xl bg-gradient-to-r from-indigo-500 to-purple-500 text-white shadow-lg flex items-center gap-4",children:[e.jsx("div",{className:"bg-white/20 rounded-2xl p-4",children:e.jsx($,{size:28})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wider font-bold opacity-80",children:t("ai_credits_balance")}),e.jsxs("p",{className:"text-3xl font-black",children:[a.points," ",t("points")]}),e.jsx("p",{className:"text-sm opacity-80",children:t("ai_credits_hint")})]})]}),e.jsxs("div",{className:"p-5 rounded-2xl border border-gray-100 bg-gray-50 flex items-center gap-4",children:[e.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:e.jsx(M,{size:28,className:"text-emerald-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase font-bold text-gray-500 tracking-wider",children:t("net_earnings")}),e.jsxs("p",{className:"text-3xl font-black text-gray-900",children:["₺",b.toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-1",children:[e.jsx(D,{size:14})," ",t("commission_info").replace("{commission}",`${l.commissionRate}%`)]})]}),e.jsxs("div",{className:"ml-auto flex flex-col items-end gap-1",children:[e.jsx("p",{className:"text-xs text-gray-500 font-semibold",children:t("available_payout_balance").replace("{amount}",`₺${d.toFixed(2)}`)}),e.jsx("button",{onClick:L,disabled:d<=0,className:"bg-gray-900 text-white px-4 py-2 rounded-xl font-bold text-sm hover:bg-gray-800 transition-colors disabled:opacity-50",children:t("request_payout")})]})]})]})]}),e.jsxs("section",{className:"bg-white rounded-3xl border border-gray-100 shadow-sm p-8 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between flex-wrap gap-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase font-bold text-gray-400",children:t("ai_credit_packages")}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:t("ai_credit_packages_subtitle")})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[y.map(s=>e.jsxs("div",{className:"border border-gray-100 rounded-2xl p-5 flex flex-col shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:s.name}),e.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase",children:t("credits")})]}),e.jsx("p",{className:"text-3xl font-black text-indigo-600 mt-2",children:s.points}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["₺",s.price.toFixed(2)]}),s.description&&e.jsx("p",{className:"text-sm text-gray-500 flex-1",children:s.description}),e.jsx("button",{onClick:()=>N(s.id),className:"mt-6 w-full bg-indigo-600 text-white py-2.5 rounded-xl font-bold hover:bg-indigo-500 transition-colors",children:t("purchase")})]},s.id)),y.length===0&&e.jsx("div",{className:"col-span-full text-center py-10 text-gray-400",children:t("no_packages_defined")})]})]}),e.jsxs("section",{className:"bg-white rounded-3xl border border-gray-100 shadow-sm p-8 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase font-bold text-gray-400",children:t("payout_requests")}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:t("payout_requests_subtitle")})]}),p>0&&e.jsx("span",{className:"text-xs font-bold text-amber-600 bg-amber-50 border border-amber-100 px-3 py-1 rounded-xl",children:t("pending_amount").replace("{amount}",`₺${p.toFixed(2)}`)})]}),m.length===0?e.jsx("div",{className:"border border-dashed border-gray-200 rounded-2xl p-8 text-center text-gray-400",children:t("no_payout_requests")}):e.jsx("div",{className:"space-y-3",children:m.sort((s,r)=>new Date(r.createdAt).getTime()-new Date(s.createdAt).getTime()).slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between border border-gray-100 rounded-2xl px-4 py-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-bold text-gray-800",children:["₺",s.amountTL.toFixed(2)]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[new Date(s.createdAt).toLocaleString(),s.note?` • ${s.note}`:""]})]}),e.jsx("span",{className:`text-xs font-bold px-3 py-1 rounded-xl border ${E(s.status)}`,children:t(`status_${s.status}`)})]},s.id))})]}),e.jsxs("section",{className:"bg-white rounded-3xl border border-gray-100 shadow-sm p-8 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(I,{className:"text-indigo-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase font-bold text-gray-400",children:t("ai_usage_log_title")}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:t("ai_usage_log_subtitle")})]})]}),j.length===0?e.jsx("div",{className:"border border-dashed border-gray-200 rounded-2xl p-10 text-center text-gray-400",children:t("ai_usage_log_empty")}):e.jsx("div",{className:"space-y-3",children:j.map(s=>e.jsxs("div",{className:"flex items-center justify-between border border-gray-100 rounded-2xl px-4 py-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-gray-800",children:t("ai_usage_entry").replace("{cost}",`${s.cost}`)}),e.jsxs("p",{className:"text-xs text-gray-500",children:[new Date(s.timestamp).toLocaleString()," • ",s.topic||t("general_topic")]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase",children:t("balance_after")}),e.jsx("p",{className:"text-lg font-black text-indigo-600",children:s.creditsAfter})]})]},s.id))})]}),e.jsxs("section",{className:"bg-white rounded-3xl border border-gray-100 shadow-sm p-8 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(A,{className:"text-amber-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase font-bold text-gray-400",children:t("earning_history_title")}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:t("earning_history_subtitle")})]})]}),x.length===0?e.jsx("div",{className:"border border-dashed border-gray-200 rounded-2xl p-10 text-center text-gray-400",children:t("no_transactions")}):e.jsx("div",{className:"space-y-3",children:x.sort((s,r)=>new Date(r.timestamp).getTime()-new Date(s.timestamp).getTime()).slice(0,6).map(s=>e.jsxs("div",{className:"flex items-center justify-between border border-gray-100 rounded-2xl px-4 py-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-bold text-gray-800",children:[t("purchase_success")," • ",s.examId]}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(s.timestamp).toLocaleString()})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-lg font-black text-emerald-600",children:[s.amount," ",t("points")]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["₺",(s.amount*l.pointConversionRate).toFixed(2)]})]})]},s.id))})]}),C&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl shadow-2xl p-6 space-y-4 relative",children:[e.jsx("button",{onClick:()=>i(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-700",children:e.jsx(q,{size:18})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:t("request_payout")}),e.jsx("p",{className:"text-sm text-gray-500",children:t("request_payout_desc").replace("{amount}",`₺${d.toFixed(2)}`)}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 block",children:t("enter_amount")}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:g,onChange:s=>o(s.target.value),className:"w-full bg-gray-50 border border-gray-200 rounded-xl p-3 text-sm focus:outline-none focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 block",children:t("optional_note")}),e.jsx("textarea",{value:n,onChange:s=>c(s.target.value),className:"w-full bg-gray-50 border border-gray-200 rounded-xl p-3 text-sm focus:outline-none focus:border-indigo-500",rows:3,placeholder:t("optional_note_placeholder")})]})]}),e.jsx("button",{onClick:P,className:"w-full bg-gray-900 text-white py-3 rounded-xl font-bold hover:bg-gray-800 transition-colors",children:t("submit_request")})]})})]})};export{J as TeacherShop};
