import{c as y,u as _e,f as ke,d as Ce,r as l,j as e,k as Se,M as $e,B as ae}from"./index-BaVKQqDK.js";import{StudentResults as ze}from"./StudentResults-C94F8eQ1.js";import{A as Le}from"./arrow-left-BIuUEui7.js";import{P as Pe}from"./pen-CPaGXf9R.js";import{U as le}from"./user-plus-DR8vmRno.js";import{A as ne}from"./at-sign-qrWvil3w.js";import{P as oe}from"./package-BzlSbEGb.js";import{X as Me}from"./x-yt4G6MFv.js";import"./play-GRDGK8LR.js";import"./circle-alert-URQLJeUd.js";import"./circle-check-big-CKswuTQY.js";import"./arrow-right-D3H4TVfT.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ie=y("external-link",Ee);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Ie=y("share-2",Ae);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Fe=y("user-check",qe);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Re=y("user-minus",Te),es=()=>{var Z,G,J,Q,Y,ee,se,te,re;const{user:n,users:h,updateUser:$,schools:z,logout:L,t:s,showAlert:c,toggleFollow:P,exams:de,shopItems:M,systemSettings:ce,createUsername:xe,formatDisplayName:me,isUsernameAvailable:ge}=_e(),{id:b}=ke(),x=Ce(),[r,j]=l.useState(null),[p,E]=l.useState(!1),[A,I]=l.useState(""),[q,F]=l.useState(""),[T,R]=l.useState(1),[i,N]=l.useState({email:!0,app:!0}),[u,f]=l.useState(null),[B,he]=l.useState(""),[D,v]=l.useState(""),[w,_]=l.useState("fullName"),k=l.useMemo(()=>{const t={};return((r==null?void 0:r.inventory)||[]).forEach(a=>{t[a]=(t[a]||0)+1}),t},[r==null?void 0:r.inventory]),U=l.useMemo(()=>M.filter(t=>(k[t.type]||0)>0),[M,k]);if(l.useEffect(()=>{if(b&&b!==(n==null?void 0:n.id)){const t=h.find(a=>a.id===b);j(t||n)}else j(n)},[b,n,h]),l.useEffect(()=>{r&&(I(r.bio||""),F(r.schoolId||""),R(r.classLevel||1),N(r.notificationSettings||{email:!0,app:!0}))},[r]),l.useEffect(()=>{r!=null&&r.referralCode&&typeof window<"u"&&he(`${window.location.origin}/#/auth?ref=${r.referralCode}`)},[r==null?void 0:r.referralCode]),l.useEffect(()=>{r!=null&&r.username?v(r.username):v("")},[r==null?void 0:r.username]),l.useEffect(()=>{r&&_(r.displayPreference||"fullName")},[r==null?void 0:r.displayPreference]),!n||!r)return null;const o=n.id===r.id,H=(Z=n.following)==null?void 0:Z.includes(r.id),be=()=>{o&&($({...n,bio:A,schoolId:q,classLevel:T,notificationSettings:i}),E(!1),c("Profile updated!","success"))},pe=()=>{P(r.id)},C=z.find(t=>t.id===r.schoolId),O=ce.usernameCost??0,d=D.trim().toLowerCase(),g=d.length>=3&&(r?ge(d,r.id):!1),ue=t=>{const a=t.replace(/[^a-zA-Z0-9._]/g,"");v(a.toLowerCase())},fe=()=>{if(!d){c(s("username_invalid"),"error");return}if(!g){c(s("username_taken"),"error");return}xe(d)&&_("username")},K=t=>{if(!(!o||!n)){if(t==="username"&&!r.username){c(s("display_pref_username_needed"),"error");return}w!==t&&(_(t),$({...n,displayPreference:t}),c(s("display_preference_saved"),"success"))}},V=u==="followers"?h.filter(t=>{var a;return(a=r.followers)==null?void 0:a.includes(t.id)}):u==="following"?h.filter(t=>{var a;return(a=r.following)==null?void 0:a.includes(t.id)}):[],ye=t=>{f(null),x(`/student/profile/${t}`)},je=()=>{x("/chat",{state:{startChatWith:r.id}})},W=t=>{typeof navigator<"u"&&navigator.clipboard&&navigator.clipboard.writeText(t).then(()=>{c(s("copied"),"success")}).catch(()=>c("Unable to copy","error"))},X=((r==null?void 0:r.purchasedExamIds)||[]).map(t=>de.find(a=>a.id===t)).filter(t=>!!t),Ne=t=>{x(`/student/exam/${t}`)};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 pb-20 relative animate-fade-in",children:[!o&&e.jsxs("button",{onClick:()=>x(-1),className:"flex items-center gap-2 text-gray-500 hover:text-gray-900 font-bold mb-4",children:[e.jsx(Le,{size:20})," Back"]}),e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-gray-100 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-24 bg-gradient-to-r from-brand-400 to-orange-500"}),e.jsxs("div",{className:"relative pt-12 flex flex-col lg:flex-row items-center lg:items-end gap-6 text-center lg:text-left",children:[e.jsxs("div",{className:"relative shrink-0",children:[e.jsx("img",{src:r.avatar,className:"w-24 h-24 rounded-full border-4 border-white shadow-lg bg-white object-cover shrink-0"}),r.activeFrame==="AVATAR_FRAME"&&e.jsx("span",{className:"absolute -top-3 -right-3 text-2xl animate-pulse",children:"ðŸ‘‘"})]}),e.jsxs("div",{className:"flex-1 mb-2 min-w-0 w-full",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 truncate",children:r.name}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center lg:justify-start gap-2 mt-2",children:[r.role==="STUDENT"&&e.jsxs("span",{className:"bg-brand-100 text-brand-700 px-3 py-1 rounded-lg text-xs font-bold whitespace-nowrap border border-brand-200",children:[r.classLevel,". ",s("grade")]}),e.jsx("span",{className:"text-gray-500 font-medium text-sm truncate max-w-full",children:(C==null?void 0:C.name)||s("no_school_selected")})]})]}),e.jsx("div",{className:"flex gap-2 shrink-0 flex-wrap justify-center w-full lg:w-auto",children:o?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>E(!p),className:"bg-gray-100 text-gray-600 px-4 py-2 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-gray-200 transition-colors",children:[e.jsx(Pe,{size:16})," ",s(p?"cancel":"edit_profile")]}),e.jsxs("button",{onClick:L,className:"bg-red-50 text-red-500 px-4 py-2 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-red-100 transition-colors",children:[e.jsx(Se,{size:16})," ",e.jsx("span",{className:"hidden sm:inline",children:s("logout")})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:je,className:"bg-blue-500 text-white px-4 py-2.5 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-blue-600 transition-colors shadow-sm",children:[e.jsx($e,{size:18})," ",s("message")]}),e.jsx("button",{onClick:pe,className:`px-6 py-2.5 rounded-xl font-bold text-sm flex items-center gap-2 transition-all shadow-sm ${H?"bg-gray-100 text-gray-500 hover:bg-red-50 hover:text-red-500":"bg-brand-50 text-brand-600 hover:bg-brand-100"}`,children:H?e.jsxs(e.Fragment,{children:[" ",e.jsx(Fe,{size:18})," ",s("following")," "]}):e.jsxs(e.Fragment,{children:[" ",e.jsx(le,{size:18})," ",s("follow")," "]})})]})})]}),e.jsxs("section",{className:"bg-white p-6 rounded-3xl shadow-sm border border-gray-100 mt-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase",children:s("username")}),e.jsxs("div",{className:"inline-flex items-center gap-2 text-2xl font-black text-gray-900",children:[e.jsx(ne,{size:22,className:"text-brand-500"}),e.jsx("span",{children:r.username?`@${r.username}`:s("username_placeholder")||"kullaniciadi"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:s(o?"username_hint":"username_cannot_edit")})]}),o&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:s("create_username")}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 border border-gray-200 rounded-2xl px-4 py-3 focus-within:border-brand-500 focus-within:bg-white transition-colors",children:[e.jsx(ne,{size:18,className:"text-gray-400"}),e.jsx("input",{value:D,onChange:t=>ue(t.target.value),maxLength:20,className:"flex-1 bg-transparent outline-none text-gray-900 font-bold text-lg",placeholder:s("username_placeholder")||"kullaniciadi"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(s("username_preview_label")||"Ã–nizleme: @{username}").replace("{username}",d||"helloclass")}),d&&e.jsx("p",{className:`text-xs font-bold ${g?"text-emerald-600":"text-red-500"}`,children:s(g?"username_available":"username_taken")})]}),e.jsxs("div",{className:"md:w-48 bg-gray-50 border border-gray-200 rounded-2xl p-4 text-xs text-gray-600 font-semibold",children:[e.jsx("p",{children:s("username_cost_hint").replace("{points}",String(O))}),e.jsxs("p",{className:"text-[10px] text-gray-400 mt-2",children:[s("points"),": ",n.points]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[e.jsxs("button",{onClick:fe,disabled:!g||d===(r.username||""),className:`px-6 py-3 rounded-2xl font-bold text-sm flex items-center justify-center gap-2 transition-colors ${g&&d!==(r.username||"")?"bg-brand-500 text-white hover:bg-brand-600":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[r.username?s("username_update_btn"):s("create_username")," Â· ",O," ",s("points")]}),r.username&&e.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1 bg-gray-50 border border-gray-200 rounded-2xl px-4 py-2 font-bold",children:[s("current_username")," ",e.jsxs("span",{className:"text-gray-900",children:["@",r.username]})]})]})]})]}),o&&e.jsx("section",{className:"bg-white p-6 rounded-3xl shadow-sm border border-gray-100 mt-6",children:e.jsxs("div",{className:"pt-2",children:[e.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase mb-2",children:s("display_preference_title")}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-black text-gray-900",children:s("display_preference_question")}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s("display_preference_hint")})]}),e.jsxs("div",{className:"inline-flex bg-gray-100 rounded-full p-1",children:[e.jsx("button",{type:"button",onClick:()=>K("fullName"),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-colors ${w==="fullName"?"bg-white text-brand-600 shadow":"text-gray-500"}`,children:s("post_identity_fullname")}),e.jsx("button",{type:"button",onClick:()=>K("username"),disabled:!r.username,className:`px-4 py-1.5 rounded-full text-xs font-bold transition-colors ${w==="username"?"bg-white text-brand-600 shadow":"text-gray-400"} ${r.username?"":"opacity-50 cursor-not-allowed"}`,children:s("post_identity_username")})]})]}),!r.username&&e.jsx("p",{className:"text-xs text-red-500 mt-2",children:s("display_pref_username_needed")})]})}),p&&o&&e.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-100 grid grid-cols-1 md:grid-cols-2 gap-6 animate-fade-in text-left",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:s("bio")}),e.jsx("textarea",{value:A,onChange:t=>I(t.target.value),className:"w-full bg-gray-50 border border-gray-200 rounded-xl p-3 text-sm text-gray-900 focus:outline-none focus:border-brand-500",rows:3,placeholder:"Tell us about yourself..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:s("notification_settings")}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-bold text-gray-700",children:s("email_notifs")}),e.jsx("button",{onClick:()=>N({...i,email:!i.email}),className:`w-12 h-6 rounded-full relative transition-colors ${i.email?"bg-brand-500":"bg-gray-300"}`,children:e.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full shadow transition-transform ${i.email?"left-7":"left-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-bold text-gray-700",children:s("app_notifs")}),e.jsx("button",{onClick:()=>N({...i,app:!i.app}),className:`w-12 h-6 rounded-full relative transition-colors ${i.app?"bg-brand-500":"bg-gray-300"}`,children:e.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full shadow transition-transform ${i.app?"left-7":"left-1"}`})})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:s("grade")}),e.jsx("select",{value:T,onChange:t=>R(Number(t.target.value)),className:"w-full bg-gray-50 border border-gray-200 rounded-xl p-3 text-sm text-gray-900 focus:outline-none focus:border-brand-500",children:Array.from({length:12},(t,a)=>a+1).map(t=>e.jsxs("option",{value:t,children:[t,". ",s("grade")]},t))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:s("school")}),e.jsxs("select",{value:q,onChange:t=>F(t.target.value),className:"w-full bg-gray-50 border border-gray-200 rounded-xl p-3 text-sm text-gray-900 focus:outline-none focus:border-brand-500",children:[e.jsx("option",{value:"",children:s("select_school")}),z.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-4",children:[e.jsx("button",{onClick:be,className:"flex-1 bg-brand-500 text-white py-3 rounded-xl font-bold shadow-lg shadow-brand-200 hover:bg-brand-600 transition-colors",children:s("save")}),e.jsx("button",{onClick:L,className:"flex-1 bg-red-50 text-red-500 py-3 rounded-xl font-bold border border-red-100 hover:bg-red-100 transition-colors",children:s("logout")})]})]})]}),!p&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-100 flex flex-col md:flex-row gap-6 text-left items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-800 text-sm mb-2",children:s("bio")}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:r.bio||"No bio yet."})]}),o&&e.jsxs("div",{className:"flex flex-col gap-2 shrink-0",children:[e.jsxs("div",{className:`px-3 py-1.5 rounded-lg text-[10px] font-bold flex items-center gap-1.5 border ${(G=r.notificationSettings)!=null&&G.email?"bg-green-50 text-green-600 border-green-100":"bg-gray-50 text-gray-400 border-gray-100"}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${(J=r.notificationSettings)!=null&&J.email?"bg-green-500":"bg-gray-400"}`}),s("email_notifs"),": ",(Q=r.notificationSettings)!=null&&Q.email?s("on"):s("off")]}),e.jsxs("div",{className:`px-3 py-1.5 rounded-lg text-[10px] font-bold flex items-center gap-1.5 border ${(Y=r.notificationSettings)!=null&&Y.app?"bg-green-50 text-green-600 border-green-100":"bg-gray-50 text-gray-400 border-gray-100"}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${(ee=r.notificationSettings)!=null&&ee.app?"bg-green-500":"bg-gray-400"}`}),s("app_notifs"),": ",(se=r.notificationSettings)!=null&&se.app?s("on"):s("off")]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-gray-100 text-center",children:[e.jsx("div",{className:"text-2xl font-black text-brand-500",children:r.points}),e.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase",children:s("points")})]}),e.jsxs("div",{onClick:()=>f("followers"),className:"bg-white p-6 rounded-3xl border border-gray-100 text-center cursor-pointer hover:shadow-md transition-shadow group",children:[e.jsx("div",{className:"text-2xl font-black text-blue-500 group-hover:scale-110 transition-transform",children:((te=r.followers)==null?void 0:te.length)||0}),e.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase",children:s("followers")})]}),e.jsxs("div",{onClick:()=>f("following"),className:"bg-white p-6 rounded-3xl border border-gray-100 text-center cursor-pointer hover:shadow-md transition-shadow group",children:[e.jsx("div",{className:"text-2xl font-black text-purple-500 group-hover:scale-110 transition-transform",children:((re=r.following)==null?void 0:re.length)||0}),e.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase",children:s("following")})]})]}),e.jsxs("section",{className:"bg-white p-8 rounded-3xl shadow-sm border border-gray-100 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-brand-50 text-brand-600 flex items-center justify-center",children:e.jsx(oe,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:s("inventory")}),e.jsx("p",{className:"text-sm text-gray-500",children:s("inventory")})]})]}),U.length===0?e.jsxs("div",{className:"border border-dashed border-gray-200 rounded-2xl p-10 text-center text-gray-500 flex flex-col items-center gap-3",children:[e.jsx(oe,{size:32,className:"text-gray-300","aria-hidden":"true"}),e.jsx("p",{className:"font-bold",children:s("empty_inventory")})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:U.map(t=>{const a=k[t.type]||0,m=`item_name_${t.type}`,S=`item_desc_${t.type}`,ve=s(m)!==m?s(m):t.name,we=s(S)!==S?s(S):t.description;return e.jsxs("div",{className:"p-5 border border-gray-100 rounded-2xl shadow-sm flex items-center gap-4",children:[e.jsx("div",{className:"text-3xl bg-gray-50 p-4 rounded-2xl",children:t.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-900 truncate flex items-center gap-2",children:[ve,a>1&&e.jsxs("span",{className:"text-[10px] font-bold text-gray-400",children:["Ã—",a]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:we})]})]},`profile-inv-${t.id}`)})})]}),e.jsx("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-gray-100",children:e.jsx(ze,{studentId:r.id})}),o&&e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-gray-100 space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-brand-50 text-brand-600 flex items-center justify-center","aria-hidden":"true",children:e.jsx(ae,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:s("my_exams")}),e.jsx("p",{className:"text-sm text-gray-500 font-medium",children:s("purchased_exams")})]})]}),e.jsxs("button",{onClick:()=>x("/student/exams"),className:"flex items-center justify-center gap-2 px-4 py-2 rounded-xl bg-gray-900 text-white text-sm font-bold hover:bg-gray-800 transition-colors",children:[s("explore_exams")," ",e.jsx(ie,{size:16})]})]}),X.length===0?e.jsxs("div",{className:"border border-dashed border-gray-200 rounded-2xl p-10 text-center text-gray-500 flex flex-col items-center gap-3",children:[e.jsx(ae,{size:32,className:"text-gray-300","aria-hidden":"true"}),e.jsx("p",{className:"font-bold",children:s("empty_library")}),e.jsx("p",{className:"text-sm text-gray-400",children:s("empty_library_desc")}),e.jsxs("button",{onClick:()=>x("/student/exams"),className:"mt-2 text-brand-600 font-bold hover:underline flex items-center gap-1",children:[s("go_to_market")," ",e.jsx(ie,{size:14})]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:X.map(t=>e.jsxs("div",{className:"p-5 border border-gray-100 rounded-2xl shadow-sm flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase",children:s("subject")}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${t.difficulty==="Hard"?"bg-red-50 text-red-600":t.difficulty==="Medium"?"bg-amber-50 text-amber-600":"bg-green-50 text-green-600"}`,children:s(t.difficulty.toLowerCase())})]}),e.jsx("h4",{className:"text-lg font-bold text-gray-900 line-clamp-2",children:t.title}),t.topic&&e.jsx("p",{className:"text-sm text-gray-500",children:t.topic}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[e.jsxs("span",{children:[s("time_min"),": ",t.timeLimit]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[s("questions"),": ",t.questions.length]})]}),e.jsx("button",{onClick:()=>Ne(t.id),className:"mt-2 bg-brand-500 text-white py-2 rounded-xl text-sm font-bold hover:bg-brand-600 transition-colors",children:s("start")})]},t.id))})]}),o&&r.referralCode&&e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-gray-100 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-50 text-purple-600 flex items-center justify-center",children:e.jsx(Ie,{size:18})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:s("referral_program")}),e.jsx("p",{className:"text-sm text-gray-500",children:s("referral_desc")})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-2xl border border-gray-100 flex flex-col gap-2 min-w-0",children:[e.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase",children:s("referral_code_label")}),e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"font-mono text-sm text-gray-900 bg-white px-3 py-2 rounded-xl border border-gray-200 flex-1 break-all",children:r.referralCode}),e.jsx("button",{onClick:()=>W(r.referralCode),className:"px-3 py-2 rounded-xl bg-gray-900 text-white text-xs font-bold hover:bg-gray-800 transition-colors",children:s("copy")})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-2xl border border-gray-100 flex flex-col gap-2 min-w-0",children:[e.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase",children:s("referral_link_label")}),e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"font-mono text-xs text-gray-900 bg-white px-3 py-2 rounded-xl border border-gray-200 flex-1 break-all",children:B}),e.jsx("button",{onClick:()=>W(B),className:"px-3 py-2 rounded-xl bg-gray-900 text-white text-xs font-bold hover:bg-gray-800 transition-colors",children:s("copy")})]})]})]}),e.jsxs("div",{className:"text-sm text-gray-500 font-medium flex flex-wrap gap-4",children:[e.jsx("span",{children:s("referral_count_label").replace("{count}",`${r.referralCount||0}`)}),e.jsx("span",{children:s("referral_points_label").replace("{points}",`${r.totalReferralPoints||0}`)})]})]}),u&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl shadow-2xl relative flex flex-col max-h-[80vh]",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 capitalize",children:s(u)}),e.jsx("button",{onClick:()=>f(null),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full",children:e.jsx(Me,{size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:V.length===0?e.jsx("div",{className:"text-center text-gray-400 py-8",children:"No users found."}):V.map(t=>{var a,m;return e.jsxs("div",{className:"flex items-center justify-between p-3 hover:bg-gray-50 rounded-xl transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 cursor-pointer flex-1 overflow-hidden",onClick:()=>ye(t.id),children:[e.jsx("img",{src:t.avatar,className:"w-12 h-12 rounded-full border border-gray-200 object-cover shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"font-bold text-gray-900 text-sm truncate",children:me(t,{withAt:!0})}),e.jsx("div",{className:"text-xs text-gray-500 font-bold bg-gray-100 px-1.5 py-0.5 rounded w-fit",children:t.role})]})]}),n.id!==t.id&&e.jsx("button",{onClick:()=>P(t.id),className:`p-2 rounded-lg transition-colors shrink-0 ${(a=n.following)!=null&&a.includes(t.id)?"bg-red-50 text-red-500 hover:bg-red-100":"bg-brand-50 text-brand-600 hover:bg-brand-100"}`,children:(m=n.following)!=null&&m.includes(t.id)?e.jsx(Re,{size:18}):e.jsx(le,{size:18})})]},t.id)})})]})})]})};export{es as UserProfile};
