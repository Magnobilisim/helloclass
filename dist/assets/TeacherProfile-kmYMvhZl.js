import{c as M,u as $,r as n,j as e,k as E}from"./index-BaVKQqDK.js";import{X as B}from"./x-yt4G6MFv.js";import{P as D}from"./pen-CPaGXf9R.js";import{A as k}from"./at-sign-qrWvil3w.js";import{S as F}from"./save-CIHXP_DV.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],O=M("school",q),G=()=>{const{user:a,updateUser:m,schools:u,t:s,showAlert:l,logout:S,systemSettings:C,createUsername:z,isUsernameAvailable:I}=$(),[o,b]=n.useState(!1),[p,h]=n.useState(""),[c,g]=n.useState(""),[f,y]=n.useState(""),[j,N]=n.useState(""),[i,x]=n.useState("fullName");if(n.useEffect(()=>{a&&(h(a.bio||""),g(a.branch||""),y(a.schoolId||""),N(a.username||""),x(a.displayPreference||"fullName"))},[a]),!a)return null;const L=()=>{m({...a,bio:p,branch:c,schoolId:f||void 0,updatedAt:new Date().toISOString()}),b(!1),l(s("profile_saved"),"success")},v=u.find(r=>r.id===a.schoolId),w=C.usernameCost??0,t=j.trim().toLowerCase(),d=t.length>=3&&I(t,a==null?void 0:a.id),P=r=>{const U=r.replace(/[^a-zA-Z0-9._]/g,"");N(U.toLowerCase())},A=()=>{if(!t){l(s("username_invalid"),"error");return}if(!d){l(s("username_taken"),"error");return}z(t)&&x("username")},_=r=>{if(a){if(r==="username"&&!a.username){l(s("display_pref_username_needed"),"error");return}i!==r&&(x(r),m({...a,displayPreference:r}),l(s("display_preference_saved"),"success"))}};return e.jsxs("div",{className:"max-w-3xl mx-auto space-y-8 pb-16",children:[e.jsxs("header",{className:"bg-white p-8 rounded-3xl shadow-sm border border-gray-100 flex flex-col md:flex-row md:items-center gap-6",children:[e.jsx("img",{src:a.avatar,alt:a.name,className:"w-24 h-24 rounded-2xl object-cover border-4 border-white shadow-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase mb-1",children:s("teacher_dashboard")}),e.jsx("h1",{className:"text-3xl font-black text-gray-900",children:a.name}),e.jsx("p",{className:"text-gray-500 font-medium mt-2",children:c||s("branch")}),v&&e.jsxs("div",{className:"inline-flex items-center gap-2 text-sm font-bold text-gray-500 bg-gray-50 px-3 py-1 rounded-xl mt-3",children:[e.jsx(O,{size:16})," ",v.name]})]}),e.jsx("button",{onClick:()=>b(r=>!r),className:"px-5 py-3 rounded-xl text-sm font-bold bg-gray-900 text-white hover:bg-gray-800 transition-colors flex items-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx(B,{size:16})," ",s("cancel")]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{size:16})," ",s("edit_profile")]})})]}),e.jsxs("section",{className:"bg-white p-6 rounded-3xl shadow-sm border border-gray-100 space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase",children:s("username")}),e.jsxs("div",{className:"inline-flex items-center gap-2 text-2xl font-black text-gray-900",children:[e.jsx(k,{size:22,className:"text-brand-500"}),e.jsx("span",{children:a.username?`@${a.username}`:s("username_placeholder")||"kullaniciadi"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:s("username_hint")})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:s("create_username")}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 border border-gray-200 rounded-2xl px-4 py-3 focus-within:border-brand-500 focus-within:bg-white transition-colors",children:[e.jsx(k,{size:18,className:"text-gray-400"}),e.jsx("input",{value:j,onChange:r=>P(r.target.value),maxLength:20,className:"flex-1 bg-transparent outline-none text-gray-900 font-bold text-lg",placeholder:s("username_placeholder")||"kullaniciadi"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(s("username_preview_label")||"Preview: @{username}").replace("{username}",t||"helloclass")}),t&&e.jsx("p",{className:`text-xs font-bold ${d?"text-emerald-600":"text-red-500"}`,children:s(d?"username_available":"username_taken")})]}),e.jsxs("div",{className:"md:w-48 bg-gray-50 border border-gray-200 rounded-2xl p-4 text-xs text-gray-600 font-semibold",children:[e.jsx("p",{children:s("username_cost_hint").replace("{points}",String(w))}),e.jsxs("p",{className:"text-[10px] text-gray-400 mt-2",children:[s("points"),": ",a.points]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[e.jsxs("button",{onClick:A,disabled:!d||t===(a.username||""),className:`px-6 py-3 rounded-2xl font-bold text-sm flex items-center justify-center gap-2 transition-colors ${d&&t!==(a.username||"")?"bg-brand-500 text-white hover:bg-brand-600":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[a.username?s("username_update_btn"):s("create_username")," · ",w," ",s("points")]}),a.username&&e.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1 bg-gray-50 border border-gray-200 rounded-2xl px-4 py-2 font-bold",children:[s("current_username")," ",e.jsxs("span",{className:"text-gray-900",children:["@",a.username]})]})]})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-100",children:[e.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase mb-2",children:s("display_preference_title")}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-black text-gray-900",children:s("display_preference_question")}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s("display_preference_hint")})]}),e.jsxs("div",{className:"inline-flex bg-gray-100 rounded-full p-1",children:[e.jsx("button",{type:"button",onClick:()=>_("fullName"),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-colors ${i==="fullName"?"bg-white text-brand-600 shadow":"text-gray-500"}`,children:s("post_identity_fullname")}),e.jsx("button",{type:"button",onClick:()=>_("username"),disabled:!a.username,className:`px-4 py-1.5 rounded-full text-xs font-bold transition-colors ${i==="username"?"bg-white text-brand-600 shadow":"text-gray-400"} ${a.username?"":"opacity-50 cursor-not-allowed"}`,children:s("post_identity_username")})]})]}),!a.username&&e.jsx("p",{className:"text-xs text-red-500 mt-2",children:s("display_pref_username_needed")})]})]}),e.jsxs("section",{className:"bg-white p-8 rounded-3xl shadow-sm border border-gray-100 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:s("bio")}),e.jsx("textarea",{value:p,onChange:r=>h(r.target.value),disabled:!o,className:"w-full bg-gray-50 border border-gray-200 rounded-2xl p-4 text-gray-900 focus:outline-none focus:border-brand-500 disabled:bg-gray-100",rows:4,placeholder:"Kısaca kendinizden bahsedin..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:s("branch")}),e.jsx("input",{value:c,onChange:r=>g(r.target.value),disabled:!o,className:"w-full bg-gray-50 border border-gray-200 rounded-2xl p-4 text-gray-900 focus:outline-none focus:border-brand-500 disabled:bg-gray-100",placeholder:"Matematik, Fen Bilimleri..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:s("school")}),e.jsxs("select",{value:f,onChange:r=>y(r.target.value),disabled:!o,className:"w-full bg-gray-50 border border-gray-200 rounded-2xl p-4 text-gray-900 focus:outline-none focus:border-brand-500 disabled:bg-gray-100",children:[e.jsx("option",{value:"",children:s("select_school")}),u.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[o&&e.jsxs("button",{onClick:L,className:"flex-1 px-6 py-3 rounded-2xl font-bold bg-brand-500 text-white hover:bg-brand-600 transition-colors flex items-center gap-2 justify-center shadow-brand-100 shadow-lg",children:[e.jsx(F,{size:18})," ",s("save")]}),e.jsxs("button",{onClick:S,className:"flex-1 px-6 py-3 rounded-2xl font-bold bg-red-50 text-red-500 border border-red-100 hover:bg-red-100 transition-colors flex items-center gap-2 justify-center",children:[e.jsx(E,{size:18})," ",s("logout")]})]})]})]})};export{G as TeacherProfile};
