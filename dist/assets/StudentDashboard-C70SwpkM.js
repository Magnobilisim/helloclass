import{c as k,u as L,d as z,R as E,j as e,L as S}from"./index-C5K4Kfcd.js";import{T as $}from"./trophy-BbnoAK06.js";import{T as C}from"./trending-up-DFedXgk2.js";import{A as I}from"./arrow-right-Cu228fFs.js";import{B as P}from"./bot-CPX00xs-.js";import{C as T}from"./circle-check-big-DEjO4KOF.js";import{C as A}from"./clock-CbF8bx74.js";import{P as _}from"./play-FpYKxq5-.js";import{S as R}from"./shopping-cart-CNod2Q2i.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],M=k("repeat",D),Q=()=>{const{user:t,exams:b,users:f,t:a,availableSubjects:u,results:x,purchaseExam:j,formatDisplayName:y}=L(),m=z(),v=b.filter(s=>s.isPublished),N=E.useMemo(()=>t?new Set(x.filter(s=>s.studentId===t.id).map(s=>s.examId)):new Set,[x,t]),n=s=>(s.lifetimeExamPoints||0)+(s.lifetimeAdPoints||0),h=s=>y(s,{fallback:"firstName",withAt:!0}),o=[...f].filter(s=>s.role==="STUDENT").sort((s,r)=>n(r)-n(s)).slice(0,3),p=async s=>{var i;if(!t){m("/auth");return}const r=((i=t.purchasedExamIds)==null?void 0:i.includes(s.id))||s.price===0,l=()=>m(`/student/exam/${s.id}`);if(r){l();return}j(s.id)&&(await new Promise(c=>setTimeout(c,150)),l())};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("header",{className:"flex flex-col md:flex-row justify-between md:items-end gap-4",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-extrabold text-gray-800",children:[a("hi"),", ",t==null?void 0:t.name.split(" ")[0],"! ðŸ‘‹"]}),e.jsx("p",{className:"text-gray-500 font-medium",children:a("ready_to_learn")})]})}),e.jsxs("section",{className:"bg-gradient-to-b from-brand-50 to-white p-6 rounded-3xl border border-brand-100 shadow-sm relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-6 opacity-5 pointer-events-none",children:e.jsx($,{size:120})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center gap-2",children:"ðŸ† Liderlik Tablosu"}),e.jsx("div",{className:"hidden md:flex justify-center items-end gap-4 h-48 mb-4",children:[o[1],o[0],o[2]].map((s,r)=>{if(!s)return null;const l=n(s),d=r===1,i=r===0;return e.jsxs("div",{className:`flex flex-col items-center ${d?"order-2 scale-110 z-10":i?"order-1":"order-3"}`,children:[e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:s.avatar,className:`w-14 h-14 rounded-full border-4 shadow-md z-10 relative transition-transform group-hover:scale-110 ${d?"border-yellow-400":"border-white"}`}),d&&e.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 text-3xl animate-bounce",children:"ðŸ‘‘"})]}),e.jsxs("div",{className:`w-24 rounded-t-2xl flex flex-col justify-end items-center pb-3 text-white font-bold shadow-lg mt-3 relative ${d?"h-32 bg-yellow-400":i?"h-24 bg-gray-300":"h-20 bg-orange-300"}`,children:[e.jsx("span",{className:"text-lg",children:r===1?"1":r===0?"2":"3"}),e.jsxs("div",{className:"bg-black/10 px-2 py-0.5 rounded text-xs mt-1",children:[l," pts"]})]}),e.jsx("span",{className:"text-sm font-bold text-gray-600 mt-2 max-w-[120px] truncate",children:h(s)})]},s.id)})}),e.jsx("div",{className:"md:hidden space-y-3",children:o.map((s,r)=>e.jsxs("div",{className:"flex items-center gap-4 bg-white p-3 rounded-2xl border border-gray-100 shadow-sm",children:[e.jsx("div",{className:`font-black text-lg w-6 text-center ${r===0?"text-yellow-500":r===1?"text-gray-400":"text-orange-400"}`,children:r+1}),e.jsx("img",{src:s.avatar,className:"w-10 h-10 rounded-full bg-gray-50"}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h4",{className:"font-bold text-gray-800 truncate",children:h(s)})}),e.jsxs("div",{className:"font-bold text-brand-600 bg-brand-50 px-2 py-1 rounded-lg text-sm whitespace-nowrap",children:[n(s)," pts"]})]},s.id))})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(C,{className:"text-brand-500"})," ",a("popular_exams")]}),e.jsxs(S,{to:"/student/exams",className:"text-sm font-bold text-gray-400 hover:text-brand-600 flex items-center gap-1",children:[a("see_all")," ",e.jsx(I,{size:14})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.slice(0,3).map(s=>{var c,g;const r=((c=u.find(w=>w.id===s.subjectId))==null?void 0:c.name)||"Unknown",l=N.has(s.id),d=(g=t==null?void 0:t.purchasedExamIds)==null?void 0:g.includes(s.id),i=((t==null?void 0:t.points)||0)>=s.price;return e.jsxs("div",{className:"bg-white p-5 rounded-3xl shadow-sm border border-gray-100 flex flex-col relative overflow-hidden group hover:-translate-y-1 transition-transform",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${s.difficulty==="Easy"?"bg-green-100 text-green-600":s.difficulty==="Medium"?"bg-yellow-100 text-yellow-600":"bg-red-100 text-red-600"}`,children:a(s.difficulty.toLowerCase())}),s.isAI&&e.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-bold bg-indigo-100 text-indigo-600 flex items-center gap-1",children:[e.jsx(P,{size:12})," AI"]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx("span",{className:"text-xs text-gray-500 font-bold bg-gray-50 px-2 py-1 rounded-lg border border-gray-100",children:r}),(s.classLevel||s.englishLevel)&&e.jsx("span",{className:"text-[10px] text-white font-bold bg-brand-400 px-2 py-0.5 rounded-lg",children:s.englishLevel||`${s.classLevel}. ${a("grade")}`}),l&&e.jsxs("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-bold bg-emerald-50 text-emerald-600 flex items-center gap-1",children:[e.jsx(T,{size:10})," ",a("solved")]})]})]}),e.jsx("h4",{className:"font-bold text-lg text-gray-800 mb-1 line-clamp-2 group-hover:text-brand-600 transition-colors",children:s.title}),e.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:[a("by")," ",s.creatorName]}),e.jsxs("div",{className:"mt-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 font-medium",children:[e.jsx(A,{size:14})," ",s.timeLimit,a("min")]}),d||s.price===0?e.jsx("button",{onClick:()=>p(s),className:`px-4 py-2 rounded-xl text-sm font-bold flex items-center gap-2 ${l?"bg-emerald-500 text-white hover:bg-emerald-600":"bg-blue-50 text-blue-600 hover:bg-blue-100"}`,children:l?e.jsxs(e.Fragment,{children:[e.jsx(M,{size:16})," ",a("retake")]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{size:16})," ",a("start")]})}):e.jsxs("button",{onClick:()=>p(s),disabled:!i,className:`px-4 py-2 rounded-xl text-sm font-bold flex items-center gap-2 ${i?"bg-brand-500 text-white hover:bg-brand-600 shadow-lg":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(R,{size:16})," ",s.price," ",a("points")]})]})]},s.id)})})]})]})};export{Q as StudentDashboard};
